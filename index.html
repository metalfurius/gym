<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2c3e50"/>
    <link rel="stylesheet" href="css/style.css">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="assets/icons/icon-192x192.png"> <!-- For iOS -->
    <title>Gym Tracker Pro</title>
</head>
<body>
    <header>
        <h1>Gym Tracker Pro</h1>
        <nav>
            <button id="nav-dashboard" class="hidden">Dashboard</button>
            <button id="nav-history" class="hidden">Historial</button>
            <button id="logout-btn" class="hidden secondary-action">Cerrar Sesión</button>
        </nav>
    </header>

    <main>
        <!-- Auth View -->
        <section id="auth-view">
            <h2>Acceso / Registro</h2>
            <form id="auth-form">
                <h3>Con Email y Contraseña</h3>
                <label for="auth-email">Email:</label>
                <input type="email" id="auth-email" required autocomplete="email">
                <label for="auth-password">Contraseña:</label>
                <input type="password" id="auth-password" required minlength="6" autocomplete="current-password">
                <div class="auth-buttons">
                    <button type="button" id="login-email-btn">Iniciar Sesión</button>
                    <button type="button" id="signup-email-btn">Registrarse</button>
                </div>
                <p id="auth-error" class="error-message"></p>
            </form>
        </section>

        <!-- Dashboard View -->
        <section id="dashboard-view" class="hidden">
            <h2>Dashboard</h2>
            <div id="user-info" class="hidden">
                 <p>Usuario: <span id="user-email"></span></p>
                 <p>Fecha: <span id="current-date"></span></p>
            </div>
            <div id="resume-session-area" style="margin-bottom: 15px;">
                <p id="resume-session-info" style="font-style: italic; color: #555;"></p>
                <button id="resume-session-btn" class="ghost-action hidden" style="width:auto; margin-top:5px;">Continuar Sesión</button>
            </div>
            <label for="day-select">Selecciona el entrenamiento de hoy:</label>
            <select id="day-select">
                <option value="">-- Elige un día --</option>
            </select>
            <button id="start-session-btn" class="primary-action" disabled>Iniciar Nueva Sesión</button>
        </section>

        <!-- Session View -->
        <section id="session-view" class="hidden">
            <h2 id="session-title"></h2>
            <form id="session-form">
                <div id="exercise-list">
                    <!-- Exercise blocks will be populated by JS -->
                </div>
                <button type="submit" id="save-session-btn" class="primary-action">Guardar Sesión</button>
                <button type="button" id="cancel-session-btn" class="secondary-action" style="margin-top:10px;">Cancelar Sesión</button>
            </form>
        </section>

        <!-- History View -->
        <section id="history-view" class="hidden">
            <h2>Historial de Sesiones</h2>
            <div id="history-loading" class="spinner hidden"></div>
            <ul id="history-list">
                <!-- History items will be populated by JS -->
            </ul>
        </section>

        <!-- Session Detail Modal -->
        <div id="session-detail-modal" class="modal">
            <div class="modal-content">
                <span class="modal-close">×</span>
                <h3 id="session-detail-title">Detalle de Sesión</h3>
                <p id="session-detail-date"></p>
                <ul id="session-detail-exercises">
                    <!-- Exercise details here -->
                </ul>
            </div>
        </div>

    </main>

    <footer>
        <p>© 2025 Gym Tracker Pro. Hecho con 💪.</p>
    </footer>

    <!-- Firebase SDKs and App Logic -->
    <!-- NOTE: These are ES Modules, they will be loaded by app.js -->
    <script type="module" src="js/app.js"></script>

</body>
</html>